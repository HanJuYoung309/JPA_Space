## 엔티티 매니저 팩토리와 엔티티 매니저

### 엔티티 매니저 팩토리
- 엔티티 매니저를 만드는 공장
- 여러스레드가 동시에 접근해도 안전하다
- 엔티티매니저는 여러 스레드가 동시에접근하시면 동시성 문제 발생(스레드 간 절대 공유하면 안된다.)

## 영속성 컨텍스트란?

- 엔티티를 영구 저장하는 환경
- 엔티티 매니저로 엔티티를 저장하거나 조회하면 엔티티 - 매니저는 영속성 컨텍스트에 엔티티를 보관하고 관리한다.

- em.persist(member);

#### persist 메소드는 엔티티 매니저를 사용해서 회원 엔티티를 영속성 컨텍스트에 저장한다.

## 엔티티의 생명주기

- 비영속: 영속성 컨텍스트와 전혀 관계가 없는 상태
- 영속 : 영속성 컨텍스트에 저장된 상태
- 준영속: 영속성 컨텍스트에 저장되었다가 분리된 상태
- 삭제 : 삭제된 상태

### 영속 상태
- 영속성 컨텍스트가 관리하는 엔티티
- 영속성 컨텍스트에 의 관리된다는 뜻
- em.find나 JPQL을 사용해서 조회한 엔티티도 영속성 - 컨텍스트가 관리하는 영속상태를 의미함

### 준영속
- 영속성 컨텍스트가 관리하던 영속상태의 엔티티를 영속성 컨텍스트 관리하지않으면 준영속 상태가 됨.
- 특정 엔티티를 준 영속 상태로 만드려면 em.detach()를 호출하면 됨
- em.close()를 호출해서 영속성 컨텍스트를 닫거나 em.clear()를 호출해서 초기화해도 관리하던 영속상태는 준영속 상태를 유지함.

### 삭제
- 엔티티를 영속성 컨텍스트와 데이터베이스에서 삭제한다,

//객체를 삭제한 상태(삭제)
em.remove(member);








